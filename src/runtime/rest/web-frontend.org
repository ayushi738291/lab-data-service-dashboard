#+TITLE: Web Frontend for Lab Data Service Dashboard
#+AUTHOR: VLEAD
#+DATE: [2017-06-05 Mon]
#+SETUPFILE: ../../org-templates/level-2.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction
  This "Literate Document" is an illustration of building the client side frontend for our LDS app. This represents our
  approach for the attempt to create a LDS dashboard as a "Single Page Application", which actually means that along with 
  Decorative JS residing and HTML rendering which happens traditionally, Business Logic JS residing and HTML generation 
  will also take place at the client side. This helps us achieve a lot of tasks which wouldn't have been possible with a 
  simple website. Some of them just being
  1. Redrawing only that part of the page that is needed and not whole of the page; thus there's a rapid rendering and
     feedback attached to SPA.
  2. Minimizing the response time by keeping the working data from the server to the browser whereever possible with assurance
     of it's safety against any kind of manipulation.
  3. Global accessibility since it only needs a browser that could render HTML and JS, which is now supported by most of OS
     and simply saying devices for usage.
  
  Now the stage has been set with the basic sight of our aim we may now proceed towards writing JavaScript that would render our
  frontend HTML and define the Business logic.

 
* Front-End JavaScript
  When we start to create a web page the first thing we need to do is to modularise the functionality. We need to start to Give 
  thoughts about making functions and variables that aid those functions that could be the universal solutions for your functionality 
  needs. We might begin with the function that will be governing the part of HTML (and it's inner elements) which are supposed to 
  stay constant throughout any user session and then begin with definitions of functions to get required data from server and the
  local files. Then finally function aiding the dynamic behaviour of our page which includes generation of elements and their
  updatation. We now begin with a variable declaration(s) which will aid the functions required for our first step.
  
  Naming conventions play a key role in our implementation in order to
  make the functions work for any further addition or modification to
  data. Pay close attention to exploitation of naming convention in
  order to make most out of functions and make them immutable to
  addition/deletion of data, which is basically the DOM elements, they
  are required to process.

** Auth API
   In our implementation the top naviagation bar is the only DOM entity to be harcoded in our HTML file and thus remain constant in 
   all user sessions but it's carries a button element that change it's attributes on the basis of session login state. Thus we define 
   an object that could store the routes, which are already implemented in the backend, this button will redirect to. In our case it's 
   just login and logout. 
#+NAME: auth_api
#+BEGIN_SRC js 
var AuthAPI = {
  login: function() {
    window.location.href = '/login';
  },
  logout: function() {
    window.location.href = '/logout';
  }
};
#+END_SRC
   At first even route to home, since navigation bar had another button element for home; was part of this object but since functionality 
   of home emerged more as hash route, it was removed from here. It now exist as a hash route, content for which other than the side
   navigation bar has not been decided yet.

** Index Handler
   Now we needed a function that could change the attributes of elements of our navigation bar just on the basis the current login session
   state. We came up with this function which would be taking login session state data from another helper function to update our DOM 
   elements as required, which are innerHTML content in this case along with glyph icons for eye candy part. 
#+NAME: index_handler
#+BEGIN_SRC js

var index_handler = function() {
  var auth_btn = $('#login-logout-btn')[0];
  var span_btn = $('#login-logout-spn')[0];
  if (logged) {
    get_users();
    get_roles();
    show_one_container('side-nav-container');
    load_role_users();
    auth_btn.onclick = AuthAPI.logout;
    auth_btn.innerHTML = span_btn.outerHTML + '  ' + ' LOGOUT';
    span_btn = $('#login-logout-spn')[0];
    span_btn.className = 'glyphicon glyphicon-log-out';
  }
  else {
    hide_all_containers();
    auth_btn.onclick = AuthAPI.login;
    auth_btn.innerHTML = span_btn.outerHTML + '  ' + ' LOGIN';
    span_btn = $('#login-logout-spn')[0];
    span_btn.className = 'glyphicon glyphicon-log-in';
  }
};
#+END_SRC   
   
** Logged In
   Now it is the time to define the define the helper function that would be provided our previous function the login session state details.
   In order to get this data in need to interact with the server. We use an Synchronus AJAX call for it because we dont want the stale data
   to interfere with the updatation fo DOM content at any given moment.
#+NAME: logged_in
#+BEGIN_SRC js 
var is_logged_in = function() {
  $.ajax({
    url: 'logged_in',
    type: 'GET',
    contentType: 'charset=UTF-8',
    async: false,
    success: function (response) {
      logged = true;
      session_detail = response.session;
      Object.freeze(session_detail);
    },
    error: function (response) { 
      logged = false;
    }
  });
  return logged;
};  
#+END_SRC

** Get JSON
   After working on the DOM elements that were supposed to stay constant throught the user session to it is time to  define function that 
   could will help us to get HTML data to populate for the current user session from the local JSON file. We defines two functions to get
   Dashboard and Side Navigation Bar seperately as of now which might change towards our final draft. This data is planned to be fed to 
   functions that would genrate elements for us and finally appends them to the body.
#+NAME: get_json_dash
#+BEGIN_SRC js 
var getJSONDash = function(role) {
  $.ajax({
    url: 'static/js/main.json',
    dataType: 'json',
    async: false,
    success: function (response) {
      className = role+ '_dash';
      data = response[className];
    },
    error: function() {
      data = null;
    }
  });
  return data;
};
#+END_SRC

#+NAME: get_json_nav
#+BEGIN_SRC js
var getJSONNav = function(role) {
  $.ajax({
    url: 'static/js/main.json',
    dataType: 'json',
    async: false,
    success: function (response) {
      className = role+ '_nav';
      data = response[className];
    },
    error: function() {
      data = null;
    }
  });
  return data;
};
#+END_SRC
** Docoding a JSON
   Since we had the HTML data in JSON format we were in a need of functions to which would be able process this data and generatee the
   required elements which we would be able to attach to our body one by one. We seperated the required functionality in three parts 
   which are first to get the data, then process the data to create elements and then finally attach these elements to the body of HTML.

#+NAME: create_Division
#+BEGIN_SRC js
var createDivisions = function () {
  attachDivsionsToBody(getJSONNav(session_detail.role).map(createElements));
  attachDivsionsToBody(getJSONDash(session_detail.role).map(createElements));
};
#+END_SRC

#+NAME: decoding_Json
#+BEGIN_SRC js
var createElements = function(element) {
  var new_ele = document.createElement(element.typeofdiv);
  for (i in element) {
    if (i === 'class') {
      new_ele.className = element[i];
    }
    else if (i !== 'elements' && i !== 'typeofdiv') {
      new_ele[i] = element[i];
    }
  }
  if (element['elements']) {
    element['elements'].forEach(function (ele) {
      var temp_element = createElements(ele);
      new_ele.append(temp_element)
    });
  }
  return new_ele;
};
#+END_SRC

#+NAME: attach_Division
#+BEGIN_SRC js
var attachDivsionsToBody = function (divisions) {
  divisions.forEach(function (division) {
    document.getElementById('body').appendChild(division);
  });
};
#+END_SRC

** Hash to Handler Map
   For a Single Page Application like ours one of the must have part is a client side router. It knows how to tweak the content of the 
   navigation/url bar and informs the rest system about the URL changes. We here tried to implement hash based routing for our app. A
   hash based routing uses anchor part of the URL to simulate different actions on the browser screen. A hash of the page for the example 
   given below will be ~first-page~.

#+BEGIN_SRC js
http://webapp.com/#first-page
#+END_SRC

   It is interesting to note that ~#first-page~ is never sent to server; hence doesn't need to be defined as route in our backend, since
   hash-routing never involves reloading of the page, it just helps in making the page dynamic at the client side. Though, This might arise
   another problem of 'Then how to register the accessible hashes?'. We would tackle all these problems and implementing our hash routing 
   below using couple of functions.

   We start of with define an object =hash_to_handlers_map= that would contain all the available hash routes for us. In our case since
   home is common to all the user sessions, we start off with initialzing it with ~home~.

#+NAME: handlers_map
#+BEGIN_SRC js
hash_to_handlers_map = {home:'home'}; 
#+END_SRC

   Now we need to add the rest of available hash routes for the logged in user depending upon it's privlidges. We accomplish this task by 
   creating a function that would search for all the elements in current populated HTML page (based on the user's role in the current 
   session) for the substring ~-container~ in end of all the element ids. Once all the hash-routes are added we freeze the object in order
   to make sure no manipulation of our object takes places at the client side, which would prevent user to access unauthorized/non-existant
   hash routes.

#+NAME: handlers_map_func_def
#+BEGIN_SRC js
var handlers_map = function () {
  var select = document.querySelectorAll('[id$="-container"]');
  [].forEach.call(select, function (hash_name) {
    var id = hash_name.id.slice(0,-10);
    hash_to_handlers_map[id.valueOf()] = id;
  });
  Object.freeze(hash_to_handlers_map);
};

#+END_SRC

** Hash Route Navigation
   As we are now done with defining all our accessible hash routes, we now need the functions that could allow us to catch hold of the
   current window hash route and further navigate to a different hash route. We use the inbuilt JavaScript function window.location 
   for the same.
   We can also use hash path functions which are predefined in the JavaScript library and thus the definitons of the current version
   of this functions are subjected to change.
#+NAME: current_window_hash
#+BEGIN_SRC js
var get_window_hash_path = function() {
  var hash = window.location.href.split('#')[1] || '';
  return hash;
};
#+END_SRC

#+NAME: hash_navigate_function
#+BEGIN_SRC js
var navigate = function (path) {
  var current = window.location.href;
  window.location.href = current.replace(/#(.*)$/, '') + '#' + path;
};
#+END_SRC

** Register on hash change
   Now we need a function that would change our web page as soon as a different =hash= in the url is requested. This functions was supposed
   to check for the wether the hash change was done by side navigation bar button click or simply using the URL. This task has been
   accomplished by using a variable ~hashNotClicked~ in order to keep the track of the button hit/url change. We even check for the requested
   hash to be accessible to our user in the current session. Any attempt to access non-existant/unauthorized hash will give a alert and
   redirection to home shall happen.
 
#+NAME: register_on_hash_change
#+BEGIN_SRC js
var register_onhashchange_handlers = function(hash_to_handlers_map) {
  $(window).on('hashchange', function(e) {
    hash_path = get_window_hash_path();
    if (hash_to_handlers_map.hasOwnProperty(hash_path)) {
      if (hashNotClicked) {
        if (hash_path=='update-user') {  
          hide_all_containers();
          show_one_container('side-nav-container');
          show_one_container(hash_path+'-container');
          navigate(hash_path);
        }
      }
      else if (!hashNotClicked) {
        if (hash_path=='update-user') {
          window.alert('You are trying to access the page using wrong way!');
          hide_all_containers();
          show_one_container('side-nav-container');
          navigate('home');
        }
        else {
          document.getElementById('home-btn-'+ hash_path).click();
        }
      }
    }
    else {
      hide_all_containers();
      show_one_container('side-nav-container');
      navigate('home');
      window.alert('You are trying to access a wrong page');
    }
      hashNotClicked=false;
  });
};
#+END_SRC

** Show and Hide containers.
   Since we have stuck to SPA, we should be hiding and displaying stuff dynamically.
 If the whole content is shown everytime, it will surely be a mess.So based on the
hash, certain containers are hidden and certain containers are displayed.Below
code shows to Show containers, Show only one container and Hide all containers.   
We Basically extract the =id's= of the containers by the prefix or suffix and 
add or remove a class called =hidden=. We have defined this class hidden in the
CSS file whose =display= attribute is set to =none=. 

#+NAME: show_all_container
#+BEGIN_SRC js 
var show_all_containers = function() {
  var containers = document.querySelectorAll('[id$="-container"]');
  [].forEach.call(containers, function (container) {
    container.classList.remove('hidden');
  });
};
#+END_SRC

#+NAME: show_one_container
#+BEGIN_SRC js
var show_one_container = function(containerID) {
  $('#'+containerID).removeClass('hidden');
};
#+END_SRC

#+NAME: hide_all_container
#+BEGIN_SRC js
var hide_all_containers = function() {
  var containers = document.querySelectorAll('[id$="-container"]');
  [].forEach.call(containers, function (container) {
    container.classList.add('hidden');
  });
};
#+END_SRC

** Get Users
Since this is a user directory, the admin should be able to view all the users who
are registered for LDS. So, we send a synchronous AJAX call to the backend server
and get the list of users. As of now, we have given this rights only to admin.
Later on we can give access to other people based on our requirements.   

#+NAME: get_users
#+BEGIN_SRC js
var get_users = function() {
    $.ajax({
      url: 'users',
      type: 'GET',
      contentType: 'charset=UTF-8',
      async: false,
      success: function (response) {
        users_List = response.users;
      },
      error: function (response) {
        users_List = null;
      }
    });
};

#+END_SRC
** Get Roles
   Since this is a user directory, the admin should also be able to view all the 
different types of roles registered to LDS. So, we send a synchronous AJAX call 
to the backend server and get the list of roles available in the database. 
As of now, we have given this rights only to admin. Later on we can give access 
to other people based on our requirements.   

#+NAME: get_roles
#+BEGIN_SRC js
var get_roles = function() {
    $.ajax({
      url: 'roles',
      type: 'GET',
      contentType: 'charset=UTF-8',
      async: false,
      success: function (response) {
        roles_List = response.roles;
      },
      error: function (response) {
        roles_List = null;
      }
    });
}; 

#+END_SRC

** Add User
We now land on the Add operations. An =admin= has the access to add
a user to LDS services. Again as of now,we have given this access
only to admin. Later on, we can give access to other people also
based on our requirements. We have stuck to only 2 roles =admin=
and =guest= as of now.To Add a user, his =name=, =email= and =role=
are required. If he gives an invalid input, an error is thrown. 
Event handler is attached to the =add-user= button which takes the 
data from the input boxes and makes a synchronous AJAX call to the backend
server. Based on the responce it shows the success or error message.

#+NAME: add_user
#+BEGIN_SRC js
$(document).on('click', '#add-user-sbt', function(clickEvent) {
  var data = JSON.stringify({
    name: $('#add-user-name').val(),
    email: $('#add-user-email').val(),
    role: $('#add-user-role').val()
  });
  $.ajax({
    url: 'add_user',
    data: data,
    type: 'POST',
    contentType: 'application/json;charset=utf-8',
    async: false,
    success: function (response) {
      window.alert ('User was added');
    },
    error: function (response) {
      window.alert ('There was an error adding the user, please check the information you provided.');
    }
  });
});

#+END_SRC
** Add Role
Moving on in the Add operations, an =admin= has the access to add
a role to LDS services. As of now, we have stuck to only 2 roles
=admin= and =guest=. Later on, we can add a new =role= and assign
the necessary restrictions to access based on our requirements. 
To Add a role, =role_name= is required and we have not implemented
giving access rights to the role.Probably as we move on ,we will 
assign restrictions to the new role. If he gives an invalid input, 
an error is thrown. 
Event handler is attached to the =add-role= button which takes the 
data from the input boxes and makes a synchronous AJAX call to the backend
server. Based on the responce it shows the success or error message.


#+NAME: add_role
#+BEGIN_SRC js
$(document).on('click', '#add-role-sbt', function(clickEvent) {
  var data = JSON.stringify({
    role_name: $('#add-role-name').val()
  });
  $.ajax({
    url: 'add_role',
    data: data,
    type: 'POST',
    contentType: 'application/json;charset=utf-8',
    async: false,
    success: function (response) {
      window.alert ('Role was added');
    },
    error: function (response) {
      window.alert ('There was an error adding the role, please check the information you provided.');
    }
  });
});
#+END_SRC
** User Tables
As we are developing LDS dashboard,we ought to keep things as fancy 
as possible.So everytime a page is rereshed, we dynamically update the
user tables. We create necessary rows in the table, display appropriate
data and attach the necessary event handlers.Below code shows how the  
 users are being populated. Each row contains the =name=, =email=
and =role= of the user. It Also contains an =Edit= button and a =Delete= 
button to edit and delete a user respectively.

#+NAME: update_user_table
#+BEGIN_SRC js
var populate_tables_user = function() {
  $('#user-table').find('tr:not(:first)').remove();
  var tableRef = document.getElementById('user-table').getElementsByTagName('tbody')[0];
  for (var i in users_List) {
      var newRow = tableRef.insertRow(-1);
      var newCell = newRow.insertCell(-1);
      newCell.appendChild(document.createTextNode(Number(i)+1));
      var newCell = newRow.insertCell(-1);
      newCell.setAttribute('contenteditable',false);
      newCell.appendChild(document.createTextNode(users_List[i].name));
      var newCell = newRow.insertCell(-1);
      newCell.setAttribute('contenteditable',false);
      newCell.appendChild(document.createTextNode(users_List[i].email));
      var newCell = newRow.insertCell(-1);
      newCell.setAttribute('contenteditable',false);
      newCell.appendChild(document.createTextNode(users_List[i].role));
      
      var newCell = newRow.insertCell(-1);
      var updateButton = document.createElement('button');
      updateButton.setAttribute('id','update-user-pre-sbt-'+i);
      updateButton.setAttribute('email', users_List[i].email);
      updateButton.setAttribute('name', users_List[i].name);
      updateButton.setAttribute('role', users_List[i].role);
      updateButton.appendChild(document.createTextNode('Update'));
      newCell.appendChild(updateButton);

      var newCell = newRow.insertCell(-1);
      var removeButton = document.createElement('button');
      removeButton.setAttribute('id','remove-user-pre-sbt-'+i);
      removeButton.setAttribute('email', users_List[i].email);
      removeButton.appendChild(document.createTextNode('Delete'));
      newCell.appendChild(removeButton);

  }
  updateHelperFunction();
};
#+END_SRC
** Update And Remove User Helper on Admin Dash
 Simply adding a button against the operation does not suffice.
 We ought to feed the button of what it is supposed to do when 
 it is clicked. Since the button is not a human being,it just 
 cant assume things and move on. 
 All the Update buttons and the Remove buttons are extracted
by their prefix =update-user-pre-sbt= and =remove-user-pre-sbt=
respectively. The last part of the =id= is unique which actually
helps us in identifying the button.

#+NAME: updateUserHelperFunction
#+BEGIN_SRC js
var updateHelperFunction = function() {
  var buttons = document.querySelectorAll('[id^="update-user-pre-sbt-"]');
    [].forEach.call(buttons, function (button) {
       update_users(button);
  });
  var buttons = document.querySelectorAll('[id^="remove-user-pre-sbt-"]');
    [].forEach.call(buttons, function (button) {
       remove_users(button);
  });
}
#+END_SRC

So, Event handlers are added to all the =update= and =remove= buttons.
Based on the =id's= the buttons are extracted and each button
is attached to an event handler.

** Remove User
   In the previous slide, we observed that the =delete= buttons were attached
   to an event listener.As already been said, we are using AJAX calls to 
   send a request to the backend server. We extract the =id= of the selected
   button, get the data of the input box associated with this button.
   After extracting the email, a request is sent through a synchronous 
   AJAX call. Based on the responce from backend server, appropriate
   success or error message is displayed.
  
#+NAME: delete_user
#+BEGIN_SRC js
var remove_users = function (button) {
$('#'+button.id).on('click', function(clickEvent) {   
    var data = JSON.stringify({
      user_email: $('#'+button.id).attr('email')
    });
    $.ajax({
      url: 'delete_user',
      data: data,
      type: 'POST',
      contentType: 'application/json;charset=utf-8',
      async: false,
      success: function (response) {
        get_users();
        window.alert ('User was deleted.');
        populate_tables_user();
      },
      error: function (response) {
        window.alert ('There was an error deleting the user, please check the information you provided.');
      }
    });
});
}
#+END_SRC
Now when a user is deleted, he is no longer availed to LDS. So, he should'nt
be there in the show users page. So, everytime a user is deleted or added,
we call the =populate_tables_user= functions so that a new request is again
sent to the backend server and we get back the updated list of users.

** Update Role Tables
Again to make the dashboard fancy, we update the tables dynamically
each and every time the browser is refreshed. We create necessary rows
and populate them with appropriate data and also attach a button
to a row to be able to delete the role.Only admin can delete a role.
Later on, we can give this access to other roles also. Below code 
shows how the roles are being populated. Each row contains the =name= 
of the role.It  Also contains a =Delete= button to delete the respective role.

#+NAME: update_role_table
#+BEGIN_SRC js
var populate_tables_role = function() {
  $('#role-table').find('tr:not(:first)').remove();
  var tableRef = document.getElementById('role-table').getElementsByTagName('tbody')[0];
  for (var i in roles_List) {
      var newRow = tableRef.insertRow(-1);
      var newCell = newRow.insertCell(-1);
      newCell.appendChild(document.createTextNode(Number(i)+1));
      var newCell = newRow.insertCell(-1);
      newCell.appendChild(document.createTextNode(roles_List[i].role));
      
      var newCell = newRow.insertCell(-1);
      var removeButton = document.createElement('button');
      removeButton.setAttribute('id','remove-role-pre-sbt-'+i);
      removeButton.setAttribute('role',roles_List[i].role);
      removeButton.appendChild(document.createTextNode('Delete'));
      newCell.appendChild(removeButton);
  }
  removeHelperFunction();
};

#+END_SRC
** Update Role Helper on Admin Dash
All the =remove_role= buttons are extracted using the id's and
an event handler is attached to each of the buttons so that 
on clicking the button, the role is deleted.

#+NAME: updateRoleHelperFunction
#+BEGIN_SRC js
var removeHelperFunction = function() {
  var buttons = document.querySelectorAll('[id^="remove-role-pre-sbt"]');
    [].forEach.call(buttons, function (button) {
       remove_roles(button);
  });
};
#+END_SRC
** Remove Role
AJAX call is made to the backend server to delete a role availed to LDS.
   It takes data from the input boxes and sends a POST request to the
   backend server.
#+NAME: delete_role
#+BEGIN_SRC js
var remove_roles = function (button) {  
$('#'+button.id).on('click', function(clickEvent) {
  var data = JSON.stringify({
    role_name: $('#'+button.id).attr('role')
  });
  $.ajax({
    url: 'delete_role',
    data: data,
    type: 'POST',
    contentType: 'application/json;charset=utf-8',
    async: false,
    success: function (response) {
      get_roles();
      window.alert ('Role is deleted!');
      populate_tables_role();
    },
    error: function (response) {
      window.alert ('There was an error deleting the role, please check the information you provided.');
    }
  });
});
}
#+END_SRC
** Update Profile
A user who is logged in can update his profile. New details are taken
from the input boxes and a POST request is sent to the backend server.
Based on the response, an error message or success message is shown.
#+NAME: update_own_click
#+BEGIN_SRC js
$(document).on('click', '#update-profile-sbt', function(clickEvent) {
  var data = JSON.stringify({
    email: session_detail.email,
    new_name: $('#edit-new-name-own').val(),
    new_email: $('#edit-new-email-own').val()
  });
  $.ajax({
    url: 'update_profile',
    data: data,
    type: 'PUT',
    contentType: 'application/json;charset=utf-8',
    async: false,
    success: function (response) {
      window.alert ('User was updated');
      if (response.logout == true) {
        $('#login-logout-btn').click();
      }
      else {
        navigate('show-users');
        get_users();
      }
    },
    error: function (response) {
      navigate('show-users');      
      window.alert ('There was an error updating the user, please check the information you provided.');
    }
  });
  $('#update-user-sbt').removeAttr('email');
});

#+END_SRC
** OnClick Event Handlers
These are the event handlers for all the buttons present on the
home page. When a button is clicked, bases on that certain 
containers are hidden and  certain containers are displayed. 
#+NAME: onClick_event_handle
#+BEGIN_SRC js
var onClickFunctions = function() {

  var select = document.querySelectorAll('[class$="update-btn"]');
  [].forEach.call(select, function (button) {
    $(document).on('click','#'+button.id, function(clickEvent) {
      get_roles();
      get_users();
      load_role_users();
    });  
  }); 
  
  var select = document.querySelectorAll('[id^="home-btn-"]');
  [].forEach.call(select, function (button) {
    var oid = button.id.slice(9);
    var id = oid + '-container';
    $(document).on('click','#'+button.id, function(clickEvent) {
      hashNotClicked=true;
      hide_all_containers();
      show_one_container('side-nav-container');
      show_one_container(id);
      navigate(oid);
    });
  });  

  $(document).on('click', '#home-btn-show-users', function(clickEvent) {
    populate_tables_user(); 
  });
  
  $(document).on('click', '#home-btn-show-roles', function(clickEvent) {
    populate_tables_role();
  });
  
  $(document).on('click', '#home-btn-update-user', function(clickEvent) {
    updateHelperFunction();
  });

  $(document).on('click', '#home-btn-update-profile', function(clickEvent) {
    $('#edit-new-name-own').val(session_detail.name);
    $('#edit-new-email-own').val(session_detail.email);
  });

};
#+END_SRC
** Update User and Roles Dropdown
When adding or updating a user , a dropdown for the available roles
and emails is shown so that the user can send a valid request.
The dropdowns are populated by extracting the buttons and 
attaching the options to it.
#+NAME: update_role_drop
#+BEGIN_SRC js
var load_role_users = function() {
  var select = document.querySelectorAll('[id$="-user-role"]');
  var newOptions = roles_List;
  [].forEach.call(select, function (dropdown) {
    $('option', dropdown).remove();
    $.each(newOptions, function(text, val) { 
      var option = new Option(val.role, val.role);
      dropdown.append(option); 
    });
  });
  var select = document.querySelectorAll('[id$="-user-email"]');
  var newOptions = users_List;
  [].forEach.call(select, function (dropdown) {
    $('option',dropdown).remove();
      $.each(newOptions, function(text, val) { 
        var option = new Option(val.email, val.email);
        dropdown.append(option); 
      });
  });
};
#+END_SRC
** On hash change
Whenever =hash= is changed,hash change is detected and based on that
certain containers are displayed and certain containers are hidden.
#+NAME: hash_home
#+BEGIN_SRC js
$(window).on('hashchange', function(e) {
  if (get_window_hash_path() == 'home') {
      hide_all_containers();
      show_one_container('side-nav-container');
  }
})
#+END_SRC
** On load
   Whenever the page refreshes or loads again, the following functions are
called. Appropriate HTML is generated based on the hash.
#+NAME: onload
#+BEGIN_SRC js
window.onload = function () {
  hashNotClicked=false;
  logged = is_logged_in();
  index_handler();  
  if (logged){
  navigate('home');
  createDivisions();
  hide_all_containers();
  index_handler();  
  get_window_hash_path();
  onClickFunctions();
  handlers_map();
  register_onhashchange_handlers(hash_to_handlers_map); 
  }
};  
#+END_SRC  


* HTML
** Index
The App is now a SPA. Here's the basic skeleton.
~Side Nav to be removed from here in future releases.~
#+NAME: index
#+BEGIN_SRC html :tangle app/templates/index.html
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content ="width=device-width,initial-scale=1,user-scalable=yes"/>
	<title>LDS Dashboard</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="./static/css/style.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- jQuery library -->	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script type="text/javascript" src="./static/js/main.js"></script>
</head>
<body id="body">
	<nav class="navbar navbar-inverse"> 
  		<div class="container-fluid">
    		<div class="navbar-header">
      			<a class="navbar-brand">LDS Dashboard</a>
    		</div>
    		<ul class="nav navbar-nav">
      			<li><button id="home-btn-home" class="btn-link navbar-btn" style="padding-top: 5px" onclick=""><span id="home-spn" class="glyphicon glyphicon-home"></span>  HOME</button></li>
    		</ul>
    		<ul class="nav navbar-nav navbar-right">
      			<li><button id="login-logout-btn" class="btn-link navbar-btn" style="padding-top: 5px;" onclick=""><span id="login-logout-spn" class=""></span></button>
    		</ul>
  		</div>
	</nav>
</body>
</html>


#+END_SRC



* CSS
** CSS
This is styling code for our side nav bar.
~Will be removed from here in future releases~
#+NAME: style
#+BEGIN_SRC css :tangle app/static/css/style.css 
.sidenav {
height: 100%;
width: 250px;
z-index: 1;
top: 0;
left: 0;
margin-top: 100px;
vertical-align:middle;
position: fixed;
background-color: #FFF;
overflow-x: hidden;
transition: 0.5s;
}

.sidenav button {
padding: 8px 8px 8px 32px;
text-decoration: none;
color: #818181;
display: block;
transition: 0.3s;
}

#main {
	margin-left: 280px;
}
#+END_SRC


* JSON
** User and Role Specifications
   This is a JSON file in which the necessary specifications are given to
generate the HTML to do CRUD operation on entities 'Role' and 'User'.

#+NAME: admin_spec_file
#+BEGIN_SRC json :tangle ./app/static/js/main.json
{
  "beflogin_dash":[

  ],
  "onlogin_dash":[

  ],
  "admin_nav":[
    {
      "typeofdiv":"div",
      "id":"side-nav-container",
      "class":"sidenav hidden",
      "elements":[
        {
          "typeofdiv":"div",
          "class":"list-group table-of-contents",
          "elements":[
            {
              "typeofdiv":"button",
              "id":"home-btn-add-user",
              "class":"list-group-item",
              "innerHTML":" Add User "
            },
            {
              "typeofdiv":"button",
              "id":"home-btn-add-role",
              "class":"list-group-item",
              "innerHTML":" Add Role "
            },
            {
              "typeofdiv":"button",
              "id":"home-btn-update-profile",
              "class":"list-group-item",
              "innerHTML":" Update Profile "
            },
            {
              "typeofdiv":"button",
              "id":"home-btn-show-users",
              "class":"list-group-item",
              "innerHTML":" Show Users "
            },
            {
              "typeofdiv":"button",
              "id":"home-btn-show-roles",
              "class":"list-group-item",
              "innerHTML":" Show Roles "
            }
          ]
        }
      ]
    }
  ],
  "admin_dash":[
    {
      "typeofdiv":"div",
      "id":"main",
      "elements":[
        {
          "typeofdiv":"div",
          "id":"add-user-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add User"
            },
            {
              "typeofdiv":"ul",
              "id":"add-user",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"name_label",
                      "innerText":"Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-user-name",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"email_label",
                      "innerText":"Email:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-user-email",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"role_label",
                      "innerText":"Role:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"add-user-role",
                      "innerText":"Role:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-user-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Add",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "class":"btn btn-primary",
                      "type":"button",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
        {
          "typeofdiv":"div",
          "id":"add-role-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Role"
            },
            {
              "typeofdiv":"ul",
              "id":"add-role",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"role_label",
                      "innerText":"Role:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-role-name",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-role-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Add Role",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
        {
          "typeofdiv":"div",
          "id":"update-user-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit User"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-user",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-name-label",
                      "innerText":"New Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-name",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-email-label",
                      "innerText":"New Email:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-email",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-role-label",
                      "innerText":"New Role:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"edit-user-role",
                      "innerText":"Role:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"update-user-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Done",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
        {
          "typeofdiv":"div",
          "id":"update-profile-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit User"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-profile",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-name-own-label",
                      "innerText":"New Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-name-own",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-email-own-label",
                      "innerText":"New Email:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-email-own",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"update-profile-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Done",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
        {
          "typeofdiv":"div",
          "id":"show-users-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Show Users"
            },
            {
              "typeofdiv":"table",
              "class":"table table-striped",
              "id":"user-table",
              "elements":[
                {
                  "typeofdiv":"thead",
                  "class":"thead",
                  "elements":[
                    {
                      "typeofdiv":"tr",
                      "elements":[
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Id"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Name"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Email"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Role"
                        },
                        {
                          "typeofdiv":"th"
                        },
                        {
                          "typeofdiv":"th"
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"tbody",
                  "class":"tbody  "
                }
              ]
            },
            {
              "typeofdiv":"ul",
              "id":"show-users",
              "elements":[

              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
        {
          "typeofdiv":"div",
          "id":"show-roles-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Show Roles"
            },
            {
              "typeofdiv":"table",
              "class":"table table-striped",
              "id":"role-table",
              "elements":[
                {
                  "typeofdiv":"thead",
                  "class":"thead",
                  "elements":[
                    {
                      "typeofdiv":"tr",
                      "elements":[
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Id"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Name"
                        },
                        {
                          "typeofdiv":"th"
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"tbody",
                  "class":"tbody  "
                }
              ]
            },
            {
              "typeofdiv":"ul",
              "id":"show-roles",
              "elements":[

              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC

** LDS Specifications
   This is a JSON file in which the necessary specifications are given to
generate HTML to do the CRUD operations on LDS database.
*** Add Asset
#+NAME: add_asset_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json  
        {
          "typeofdiv":"div",
          "id":"add-asset-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Asset"
            },
            {
              "typeofdiv":"ul",
              "id":"add-asset",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_path_label",
                      "innerText":"Path:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-asset-path-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_type_label",
                      "innerText":"Type:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-asset-type-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-asset-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add Asset",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC

*** Add Institute
#+NAME: add_institute_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json  
        {
          "typeofdiv":"div",
          "id":"add-institute-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Institute"
            },
            {
              "typeofdiv":"ul",
              "id":"add-institute",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"institute_id_label",
                      "innerText":"Institute Id:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-institute-id-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"institute_name_label",
                      "innerText":"Institute Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-institute-name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_label",
                      "innerText":"Asset:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-asset-id",
                      "innerText":"Asset:"
                    }                  
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-institute-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add Institute",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Add Discipline
#+NAME: add_discipline_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json  
        {
          "typeofdiv":"div",
          "id":"add-discipline-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Discipline"
            },
            {
              "typeofdiv":"ul",
              "id":"add-discipline",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"disicpline_id_label",
                      "innerText":"Discipline Id:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-discipline-id-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"discipline_name_label",
                      "innerText":"Discipline Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-discipline-name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_label",
                      "innerText":"Asset:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-asset-id",
                      "innerText":"Asset:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-discipline-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add Discipline",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Add Section
#+NAME: add_section_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"add-section-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Section"
            },
            {
              "typeofdiv":"ul",
              "id":"add-section",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"name_label",
                      "innerText":"Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-section-name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-section-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add Section",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC

*** Add Experiment
#+NAME: add_experiment_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json
        {
          "typeofdiv":"div",
          "id":"add-experiment-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Experiment"
            },
            {
              "typeofdiv":"ul",
              "id":"add-experiment",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"id_label",
                      "innerText":"Id:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-experiment-id-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"name_label",
                      "innerText":"Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-experiment-name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"overview_label",
                      "innerText":"Overview:"
                    },
                    {
                      "typeofdiv":"input",
                      "type":"text",
                      "id":"add-experiment-overview-box"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"discipline_label",
                      "innerText":"Discipline:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"add-experiment-discipline-id-box",
                      "innerText":"Discipline:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"institute_label",
                      "innerText":"Institute:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"add-experiment-institute-id-box",
                      "innerText":"Institute:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"developer_label",
                      "innerText":"Developer:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-developer-id",
                      "innerText":"Developer:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"hosting_info_label",
                      "innerText":"Hosting Info:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-hosting-info-id",
                      "innerText":"Hosting Info:"
                    }                    
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"integration_level_label",
                      "innerText":"Integration Level:"
                    },
                    {
                      "typeofdiv":"input",
                      "type":"number",
                      "min":"0",
                      "max":"6",
                      "id":"add-experiment-integration-level-box"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_label",
                      "innerText":"Asset:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-asset-id",
                      "innerText":"Asset:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"section_label",
                      "innerText":"Section:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-section-id",
                      "innerText":"Section:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-experiment-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "class":"btn btn-primary",
                      "type":"button",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Add Lab
#+NAME: add_lab_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"add-lab-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Lab"
            },
            {
              "typeofdiv":"ul",
              "id":"add-lab",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"id-label",
                      "innerText":"Id:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"id-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"name-label",
                      "innerText":"Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"lab-overview-label",
                      "innerText":"Overview:"
                    },
                    {
                      "typeofdiv":"input",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"discipline-label",
                      "innerText":"Discipline:"
                    },
                    {
                      "typeofdiv":"select",
          
                      "id":"add-discipline-id",
                      "innerText":"Discipline:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"institute-label",
                      "innerText":"Institute:"
                    },
                    {
                      "typeofdiv":"select",
          
                      "id":"add-institute-id",
                      "innerText":"Institute:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"developer-label",
                      "innerText":"Developer:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-developer-id",
                      "innerText":"Developer:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"hosting-info-label",
                      "innerText":"Hosting Info:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-hosting-info-id",
                      "innerText":"Hosting Info:"
                    }
                    
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"integration-level-label",
                      "innerText":"Integration Level:"
                    },
                    {
                      "typeofdiv":"input",
                      "type":"number",
                      "min":"0",
                      "max":"6"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"asset_label",
                      "innerText":"Asset:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-asset-id",
                      "innerText":"Asset:"
                    }
                    
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"section-label",
                      "innerText":"Section:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"add-section-id",
                      "innerText":"Section:"
                    }
                   
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-lab-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "class":"btn btn-primary",
                      "type":"button",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Add Hosting Info
#+NAME: add_hosting_info_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json  
        {
          "typeofdiv":"div",
          "id":"add-hosting-info-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Hosting Info"
            },
            {
              "typeofdiv":"ul",
              "id":"add-hosting-info",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"hosted_url_label",
                      "innerText":"Hosted URL:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-hosted-url-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"hosting_status_label",
                      "innerText":"Hosting Status:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-hosting-status-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"hosting_on_label",
                      "innerText":"Hosted On:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-hosted-on-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-hosting-info-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add Hosting Info",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Add Developer
#+NAME: add_developer_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"add-developer-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Add Developer"
            },
            {
              "typeofdiv":"ul",
              "id":"add-developer",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"developer_name_label",
                      "innerText":"Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-developer-name-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"developer_email_label",
                      "innerText":"Email:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"add-developer-email-box",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"add-developer-sbt",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Add",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC

*** Edit Lab

#+NAME: edit_lab_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"update-lab-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Lab"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-lab",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-name-lab-label",
                      "innerText":"New Lab Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-lab-name",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-lab-overview-label",
                      "innerText":"New Overview:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-lab-overview",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-integration-level",
                      "innerText":"Integration Level:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-integration-level",
                      "type":"integer"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-institute",
                      "innerText":"Institute:"
                    },
                    {
                      "typeofdiv":"select",         
                      "id":"edit-lab-institute",
                      "innerText":"Institute:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-discipline",
                      "innerText":"Discipline:"
                    },
                    {
                      "typeofdiv":"select",          
                      "id":"edit-lab-discipline",
                      "innerText":"Discipline:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-developers",
                      "innerText":"Developer:"
                    },
                    {
                      "typeofdiv":"select",          
                      "id":"edit-lab-developers",
                      "innerText":"Developer:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-sections",
                      "innerText":"Section:"
                    },

                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"edit-lab-sections",
                      "innerText":"Sections:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-assets",
                      "innerText":"Asset:"
                    },
                    {
                      "typeofdiv":"select",          
                      "id":"edit-lab-assets",
                      "innerText":"Assets:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-hosting-info",
                      "innerText":"Hosting Info:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"edit-lab-hosting-info",
                      "innerText":"Hosting Info:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"update-lab-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Done",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Edit Institute

#+NAME: edit_institute_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json
        {
          "typeofdiv":"div",
          "id":"update-institute-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Institute"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-institute",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                          "typeofdiv":"label",
                          "id":"new-institute-name-label",
                          "innerText":"New Institute Name:"
                        },
                        {
                          "typeofdiv":"input",
                          "id":"edit-new-institute-name",
                          "type":"text"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                          "typeofdiv":"label",
                          "id":"institute-id-label",
                          "innerText":"Institute Id:"
                        },
                        {
                          "typeofdiv":"select",
                          "id":"institute-id",
                          "innerText":"Institute:"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                          "typeofdiv":"input",
                          "id":"update-institute-sbt",
                          "type":"button",
                          "class":"btn btn-primary update-btn",
                          "value":"Done",
                          "onclick":""
                        },
                        {
                          "typeofdiv":"input",
                          "id":"cancel",
                          "type":"button",
                          "class":"btn btn-primary",
                          "value":"Cancel",
                          "onclick":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"label",
                  "id":"error-box",
                  "value":"Error",
                  "class":"error hidden"
                }
              ]
            }
          ]
        },
#+END_SRC
*** Edit Discipline
    
#+NAME: edit_discipline_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json
        {
          "typeofdiv":"div",
          "id":"update-discipline-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Discipline"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-discipline",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                          "typeofdiv":"label",
                          "id":"new-discipline-name-label",
                          "innerText":"New Discipline Name:"
                        },
                        {
                          "typeofdiv":"input",
                          "id":"edit-new-discipline-name",
                          "type":"text"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                          "typeofdiv":"label",
                          "id":"new-discipline-id-label",
                          "innerText":"Discipline Id:"
                        },
                        {
                          "typeofdiv":"select",
                          "id":"edit-disicipline",
                          "innerText":"Discipline:"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                          "typeofdiv":"input",
                          "id":"update-discipline-sbt",
                          "type":"button",
                          "class":"btn btn-primary update-btn",
                          "value":"Done",
                          "onclick":""
                        },
                        {
                          "typeofdiv":"input",
                          "id":"cancel",
                          "type":"button",
                          "class":"btn btn-primary",
                          "value":"Cancel",
                          "onclick":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"label",
                  "id":"error-box",
                  "value":"Error",
                  "class":"error hidden"
                }
              ]
        },
#+END_SRC
*** Edit Experiment

#+NAME: edit_experiment_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json
        {
          "typeofdiv":"div",
          "id":"update-experiment-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Experiment"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-experiment",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-experiment-name-label",
                      "innerText":"New Experiment Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-experiment-name",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-experiment-overview-label",
                      "innerText":"New Overview:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-experiment-overview",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"integration_level_label",
                  "innerText":"New Integration Level:"
                  },
                  {
                  "typeofdiv":"input",
                  "type":"number",
                  "min":"0",
                  "max":"6",
                  "id":"edit-new-experiment-integration-level"
                  }
                ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_institute_label",
                  "innerText":"New Institute:"
                  },
                  {
                      "typeofdiv":"select",
                      "id":"edit-experiment-institute",
                      "innerText":"Institute:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_discipline_label",
                  "innerText":"New Discipline:"
                  },
                    {
                      "typeofdiv":"select",
         
                      "id":"edit-experiment-discipline",
                      "innerText":"Discipline:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_developers_label",
                  "innerText":"New Developer:"
                  },
                    {
                      "typeofdiv":"select",
                      "id":"edit-experiment-developers",
                      "innerText":"Developer:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_sections_label",
                  "innerText":"New Section:"
                  },

                    {
                      "typeofdiv":"select",
                      "id":"edit-experiment-sections",
                      "innerText":"Sections:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_assets_label",
                  "innerText":"New Asset:"
                  },
                    {
                      "typeofdiv":"select",
                      "id":"edit-experiment-assets",
                      "innerText":"Assets:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                  {
                  "typeofdiv":"label",
                  "id":"new_exp_hosting_info_label",
                  "innerText":"New Hosting Info :"
                  },

                    {
                      "typeofdiv":"select",
                      "id":"edit-experiment-hosting-info",
                      "innerText":"Hosting Info:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"update-experiment-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Done",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Edit Hosting Info

#+NAME: edit_hosting_info_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"update-hosting-info-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Hosting Info"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-hosting-info",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                          "typeofdiv":"label",
                          "id":"new-hosting-status-label",
                          "innerText":"New Hosting Status:"
                        },
                        {
                          "typeofdiv":"input",
                          "id":"edit-new-hosting-status",
                          "type":"text"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                              "typeofdiv":"label",
                              "id":"new-hosted-on-label",
                              "innerText":"New Hosted on:"
                            },
                            {
                              "typeofdiv":"input",
                              "id":"edit-new-hosted-on",
                              "type":"text"
                            }
                          ]
                        },
                        {
                          "typeofdiv":"li",
                          "elements":[
                            {
                              "typeofdiv":"input",
                              "id":"update-hosting-status-sbt",
                              "type":"button",
                              "class":"btn btn-primary update-btn",
                              "value":"Done",
                              "onclick":""
                            },
                            {
                              "typeofdiv":"input",
                              "id":"cancel",
                              "type":"button",
                              "class":"btn btn-primary",
                              "value":"Cancel",
                              "onclick":""
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "typeofdiv":"label",
                      "id":"error-box",
                      "value":"Error",
                      "class":"error hidden"
                    }
                  ]
        },

#+END_SRC
*** Edit Developer

#+NAME: edit_developer_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"update-developer-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Developer"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-developer",
              "elements":[
                {
                "typeofdiv":"li",
                "elements":[
                        {
                          "typeofdiv":"label",
                          "id":"new-developer-name-label",
                          "innerText":"New Developer Name:"
                        },
                        {
                          "typeofdiv":"input",
                          "id":"edit-new-developer-name",
                          "type":"text"
                        }
                      ]
                    },
                    {
                      "typeofdiv":"li",
                      "elements":[
                        {
                          "typeofdiv":"input",
                          "id":"update-developer-sbt",
                          "type":"button",
                          "class":"btn btn-primary update-btn",
                          "value":"Done",
                          "onclick":""
                        },
                        {
                          "typeofdiv":"input",
                          "id":"cancel",
                          "type":"button",
                          "class":"btn btn-primary",
                          "value":"Cancel",
                          "onclick":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"label",
                  "id":"error-box",
                  "value":"Error",
                  "class":"error hidden"
                }
              ]
        },
#+END_SRC
*** Edit Asset

#+NAME: edit_asset_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"update-asset-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit Asset"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-asset",
              "elements":[
                {
                "typeofdiv":"li",
                "elements":[
                {
                "typeofdiv":"label",
                "id":"new-asset-type-label",
                "innerText":"New Asset Type:"
                },
                {
                "typeofdiv":"input",
                "id":"edit-new-asset-type",
                "type":"text"
                }
                ]
                },
                {
                "typeofdiv":"li",
                "elements":[
                {
                          "typeofdiv":"input",
                          "id":"update-asset-sbt",
                          "type":"button",
                          "class":"btn btn-primary update-btn",
                          "value":"Done",
                          "onclick":""
                        },
                        {
                          "typeofdiv":"input",
                          "id":"cancel",
                          "type":"button",
                          "class":"btn btn-primary",
                          "value":"Cancel",
                          "onclick":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"label",
                  "id":"error-box",
                  "value":"Error",
                  "class":"error hidden"
                }
              ]
        },
#+END_SRC
*** Delete Lab
#+NAME: delete_lab_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-lab-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Lab"
              },
            {
              "typeofdiv":"ul",
              "id":"delete-lab",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"lab-id-label",
                      "innerText":"Lab Id:"
                    },
                    {
                      "typeofdiv":"select",
                      "id":"delete-lab-id",
                      "innerText":"Delete:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC
*** Delete Experiment
#+NAME: delete_experiment_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-experiment-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Experiment"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-lab",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-experiment-id-label",
                   "innerText":"Experiment Id:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-experiment-id",
                      "innerText":"Experiment:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Institute
#+NAME: delete_institute_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-institute-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Institute"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-institute",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-institute-id-label",
                   "innerText":"Institute Id:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-institute-id",
                      "innerText":"Institute:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Discipline
#+NAME: delete_discipline_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-discipline-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Discipline"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-discipline",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-discipline-label",
                   "innerText":"Discipline Id:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-discipline-id",
                      "innerText":"Discipline:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Section
#+NAME: delete_section_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-section-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Section"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-section",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-section-label",
                   "innerText":"Section Name:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-section-name",
                      "innerText":"Section:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Asset
#+NAME: delete_asset_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-asset-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Asset"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-asset",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-asset-label",
                   "innerText":"Asset URL:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-asset-url",
                      "innerText":"Asset:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Hosting Info
#+NAME: delete_hosting_info_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-hosting-info-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Hosting Info"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-hosting-info",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-hosting-info-label",
                   "innerText":"Hosted URL:"
                    },
                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-hosting-info-url",
                      "innerText":"Hosting Info:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Delete Developer
#+NAME: delete_developer_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"remove-developer-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Delete Developer"
            },
            {
              "typeofdiv":"ul",
              "id":"delete-developer",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                   {
                   "typeofdiv":"label",
                   "id":"delete-developer-label",
                   "innerText":"Developer Email:"
                    },

                    {
                      "typeofdiv":"select",
                      "multiple":"multiple",
                      "id":"delete-developer-email",
                      "innerText":"Developer:"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"delete",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Delete",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },

#+END_SRC

*** Show Labs
#+NAME: show_labs_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"show-labs-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Show Labs"
            },
            {
              "typeofdiv":"table",
              "class":"table table-striped",
              "id":"lab-table",
              "elements":[
                {
                  "typeofdiv":"thead",
                  "class":"thead",
                  "elements":[
                    {
                      "typeofdiv":"tr",
                      "elements":[
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Id"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Name"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Email"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Role"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":""
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"tbody",
                  "class":"tbody  "
                }
              ]
            },
            {
              "typeofdiv":"ul",
              "id":"show-users",
              "elements":[

              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        },
#+END_SRC
*** Show Experiments
#+NAME: show_experiments_spec
#+BEGIN_SRC json :tangle ./app/static/js/main.json 
        {
          "typeofdiv":"div",
          "id":"show-experiment-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Show Experiments"
            },
            {
              "typeofdiv":"table",
              "class":"table table-striped",
              "id":"experiment-table",
              "elements":[
                {
                  "typeofdiv":"thead",
                  "class":"thead",
                  "elements":[
                    {
                      "typeofdiv":"tr",
                      "elements":[
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Id"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Name"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Email"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":"Role"
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":""
                        },
                        {
                          "typeofdiv":"th",
                          "innerHTML":""
                        }
                      ]
                    }
                  ]
                },
                {
                  "typeofdiv":"tbody",
                  "class":"tbody  "
                }
              ]
            },
            {
              "typeofdiv":"ul",
              "id":"show-users",
              "elements":[

              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        }  
  ],

#+END_SRC

** Guest
This is the JSON specification for the guest dashboard.
#+NAME: guest_spec_file
#+BEGIN_SRC json :tangle ./app/static/js/main.json
  "guest_dash":[
    {
      "typeofdiv":"div",
      "id":"main",
      "elements":[
        {
          "typeofdiv":"div",
          "id":"update-profile-container",
          "class":"hidden",
          "elements":[
            {
              "typeofdiv":"p",
              "innerHTML":"Edit User"
            },
            {
              "typeofdiv":"ul",
              "id":"edit-profile",
              "elements":[
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-name-own-label",
                      "innerText":"New Name:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-name-own",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"label",
                      "id":"new-email-own-label",
                      "innerText":"New Email:"
                    },
                    {
                      "typeofdiv":"input",
                      "id":"edit-new-email-own",
                      "type":"text"
                    }
                  ]
                },
                {
                  "typeofdiv":"li",
                  "elements":[
                    {
                      "typeofdiv":"input",
                      "id":"update-profile-sbt",
                      "type":"button",
                      "class":"btn btn-primary update-btn",
                      "value":"Done",
                      "onclick":""
                    },
                    {
                      "typeofdiv":"input",
                      "id":"cancel",
                      "type":"button",
                      "class":"btn btn-primary",
                      "value":"Cancel",
                      "onclick":""
                    }
                  ]
                }
              ]
            },
            {
              "typeofdiv":"label",
              "id":"error-box",
              "value":"Error",
              "class":"error hidden"
            }
          ]
        }
      ]
    }
  ]
}
#+END_SRC


* Tangle                                                        :boilerplate:
  
** sources

#+BEGIN_SRC js :tangle app/static/js/main.js :eval no :noweb yes
<<auth_api>>
<<index_handler>>
<<logged_in>>
<<get_json_dash>>
<<get_json_nav>>
<<create_Division>>
<<decoding_Json>>
<<attach_Division>>
<<handlers_map>>
<<handlers_map_func_def>>
<<current_window_hash>>
<<hash_navigate_function>>
<<register_on_hash_change>>
<<show_all_container>>
<<show_one_container>>
<<hide_all_container>>
<<get_users>>
<<get_roles>>
<<add_user>>
<<add_role>>
<<update_user_table>>
<<updateUserHelperFunction>>
<<update_users>>
<<delete_user>>
<<update_role_table>>
<<updateRoleHelperFunction>>
<<delete_role>>
<<update_own_click>>
<<onClick_event_handle>>
<<update_role_drop>>
<<hash_home>>
<<onload>>
#+END_SRC
   


   

