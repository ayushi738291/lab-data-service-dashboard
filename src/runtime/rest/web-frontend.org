#+TITLE: Web Frontend for Lab Data Service Dashboard
#+AUTHOR: VLEAD
#+DATE: [2017-06-05 Mon]
#+SETUPFILE: ../../org-templates/level-2.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction 
  This document illustrates building of Web Frontend for LDS.
* JS
** Auth API

#+NAME: auth_api
#+BEGIN_SRC js 
var AuthAPI = {

  home: function() {
	  window.location.href = '/';
  },

  login: function() {
    window.location.href = '/login';
  },

  logout: function() {
    window.location.href = '/logout';
  },

};

#+END_SRC

** Get JSON

#+NAME: get_json
#+BEGIN_SRC js 
var getJSON = function() {
  $.ajax({
    url:'static/js/main.json',
    dataType:'json',
    async: false,
    success: function(response) {
      data = response['divisions_spec']
      //console.log(data);
    },
    error: function() {
      data = null;
      //console.log('Lover of time');
    }
  });
  return data;
};

#+END_SRC

** Logged In
   This is to check whether a user is logged into LDS or not.This function
returns true if the user is logged in and returns false if the user is not
logged in.
#+NAME: logged_in
#+BEGIN_SRC js 
var is_logged_in = function() {
	$.ajax({
		url:'logged_in',
		type: 'GET',
		contentType:'charset=UTF-8',
		async: false,
		success: function(response) {
			logged = true;
		},
		error: function(response) {
			logged = false;
		} 
	});
	return logged;
};

#+END_SRC

** Hash to Handler Map
   =hash_to_handlers= is an object which maps a =hash= to a =handler= so that
when the hash is changed, appropriate handler is called.

#+NAME: hash_to_handlers_map
#+BEGIN_SRC js
hash_to_handlers_map = {home:'home'};

var handlers_map = function () {
  var select = document.querySelectorAll('[id^="home-btn-"]');
  [].forEach.call(select, function (hash_name) {
    var id = hash_name.id.slice(9);
    hash_to_handlers_map[id.valueOf()] = id;
  });
};

#+END_SRC
** Show and Hide containers.
   We can either show or hide the containers depending on our requirements. For
example,if we want to Add a User,we can hide all the containers and display
only the Add User container.
#+NAME: show_hide
#+BEGIN_SRC js 
function show_all_containers() {
    var containers = document.querySelectorAll('[id$="-container"]');
  [].forEach.call(containers, function(container) {
      container.classList.remove('hidden');
  });
}

function hide_all_containers() {
  var containers = document.querySelectorAll('[id$="-container"]');
  [].forEach.call(containers, function(container) {
      container.className = 'hidden';
  });
};

#+END_SRC

** Register on hash change
   Whenever =hash= is changed,the change is detected and the function checks if
the new hash is valid or not. If the new hash is valid, we are navigated to the
new hash, else an error is thrown.

#+NAME: register_on_hash_change
#+BEGIN_SRC js
var register_onhashchange_handlers = function(hash_to_handlers_map) {
  $(window).on('hashchange', function(e) {
    hash_path = get_window_hash_path();
    console.log(hashNotClicked);
    if (hash_to_handlers_map.hasOwnProperty(hash_path)) {
      if (!hashNotClicked) {
        document.getElementById('home-btn-'+ hash_path).click();
      }
    //  hashChangeUpdate();
    //  hide_all_containers();
    //  show_one_container('side-nav-container');
    //  show_one_container(hash_path+'-container');
    //  navigate(hash_path);
    }
    else {
      window.alert('You are trying to access a wrong page');
      navigate('home');
    }
      hashNotClicked=false;
  });
};

#+END_SRC
** Index Handler
   Whenever hash is changed to 'index', index_handler function is called which
hides all the other conatainers and displays only index page based on whether
the user is logged in or not.
#+NAME: index_handler
#+BEGIN_SRC js
var index_handler = function() {
  var logged = is_logged_in();
  var auth_btn = $('#login-logout-btn')[0];
  var span_btn = $('#login-logout-spn')[0];
  if (logged) {
    get_users();
    get_roles();
    show_one_container('side-nav-container');
    load_role_users();
    auth_btn.onclick = AuthAPI.logout;
    auth_btn.innerHTML = span_btn.outerHTML + '  ' + ' LOGOUT';
    span_btn = $('#login-logout-spn')[0];
    span_btn.className = 'glyphicon glyphicon-log-out';
  }
  else {
    hide_all_containers();
    auth_btn.onclick = AuthAPI.login;
    auth_btn.innerHTML = span_btn.outerHTML + '  ' + ' LOGIN';
    span_btn = $('#login-logout-spn')[0];
    span_btn.className = 'glyphicon glyphicon-log-in';
  }
};

#+END_SRC
** Get Users
   AJAX call is made to the backend server to get the users availed to LDS.
#+NAME: get_users
#+BEGIN_SRC js
var get_users = function() {
    $.ajax({
      url: 'users',
      type: 'GET',
      contentType: 'charset=UTF-8',
      async: false,
      success: function (response) {
        users_List = response.users;
      },
      error: function (response) {
        users_List = null;
      }
    });
};

#+END_SRC
** Get Roles
   AJAX call is made to the backend server to get the roles availed to LDS.
#+NAME: get_roles
#+BEGIN_SRC js
var get_roles = function() {
    $.ajax({
      url: 'roles',
      type: 'GET',
      contentType: 'charset=UTF-8',
      async: false,
      success: function (response) {
        roles_List = response.roles;
      },
      error: function (response) {
        roles_List = null;
      }
    });
}; 

#+END_SRC

** Delete User
   AJAX call is made to the backend server to delete a user availed to LDS.
#+NAME: delete_user
#+BEGIN_SRC js
var remove_users = function (button) {
$(document).on('click', '#'+button.id, function(clickEvent) {
    var data = JSON.stringify({
      user_email: $('#'+button.id).attr('email')
    });
    $.ajax({
      url: 'delete_user',
      data: data,
      type: 'POST',
      contentType: 'application/json;charset=utf-8',
      async: false,
      success: function (response) {
        get_users();
        window.alert ('User was deleted.');
        populate_tables_update();
        updateHelperFunction();
      },
      error: function (response) {
        window.alert ('There was an error deleting the user, please check the information you provided.');
      }
    });
});
}

#+END_SRC
** Navigate
   We can navigate and get the present hashes at any point of time using the
functions below.
#+NAME: navigate
#+BEGIN_SRC js
var get_window_hash_path = function() {
  var hash = window.location.href.split('#')[1] || '';
};

var navigate = function(path) {
  var current = window.location.href;
  window.location.href = current.replace(/#(.*)$/, '') + '#' + path;
};

#+END_SRC
** On load
   Whenever the page refreshes or loads again, the following functions are
called. Appropriate HTML is generated based on the hash.
#+NAME: onload
#+BEGIN_SRC js
window.onload = function () {
  navigate('home');
  attachDivsionsToBody(createDivisions());
  hide_all_containers();
  index_handler();
  get_window_hash_path();
  onClickFunctions();
  onChangeFunctions();
  handlers_map();
  register_onhashchange_handlers(hash_to_handlers_map);
};

#+END_SRC  
** Docoding a JSON
   These functions take a JSON object,decodes the JSON and generates the
specific HTML. Basic idea is to automate things. You just have to give JSON
specifications and all the HTML gets generated with least amount of efforts.

#+NAME: Decoding_json
#+BEGIN_SRC json :tangle ./app/static/js/main.js
var createElements = function(element) {
  var new_ele = document.createElement(element['typeofdiv']);
  for (var i in element)
    if(i!="elements" && i!="typeofdiv")
    new_ele[i] = element[i];

  if(element['elements'])
  {
    element['elements'].forEach(function(ele) {
    var temp_element = createElements(ele);
      new_ele.append(temp_element)
    });
  }
  return new_ele;
};

var createDivisions = function() {
  return divisions_spec.map(createElements);
};
var attachDivsionsToBody = function(divisions) {
  divisions.forEach(function(division) {
    document.getElementsByTagName("body")[0].appendChild(division);
  });
};

#+END_SRC

* JSON
** User and Role Specifications
   This is a JSON file in which the necessary specifications are given to
generate the HTML to do CRUD operation on entities 'Role' and 'User'.

#+NAME: JSON_spec_file
#+BEGIN_SRC json :tangle ./app/static/js/main.json
{
  "divisions_spec":[
    {
      "typeofdiv":"div",
      "id":"add-user-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Add User"
        },
        {
          "typeofdiv":"ul",
          "id":"add-user",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"name_label",
                  "innerText":"Name:"
                },
                {
                  "typeofdiv":"input",
                  "id":"name-box",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"email_label",
                  "innerText":"Email:"
                },
                {
                  "typeofdiv":"input",
                   "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-user-role",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "class":"btn btn-primary",
                  "type":"button",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"add-role-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Add Role"
        },
        {
          "typeofdiv":"ul",
          "id":"add-role",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"role_label",
                  "innerText":"Role:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add-role-box",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add Role",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"update-user-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Edit User"
        },
        {
          "typeofdiv":"ul",
          "id":"edit-user",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"edit-user-email",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"new-name-label",
                  "innerText":"New Name:"
                },
                {
                  "typeofdiv":"input",
                  "id":"edit-new-name",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"new-email-label",
                  "innerText":"New Email:"
                },
                {
                  "typeofdiv":"input",
                  "id":"edit-new-email",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"edit-user-role",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"done",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Done",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"remove-user-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Delete User"
        },
        {
          "typeofdiv":"ul",
          "id":"delete-user",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"delete-user-email",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"delete",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Delete",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"remove-role-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Delete Role"
        },
        {
          "typeofdiv":"ul",
          "id":"delete-role",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"delete-user-role",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"delete",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Delete Role",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    { 
      "typeofdiv":"div",
      "id":"show-users-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Show Users"
        },
        {
          "typeofdiv":"table",
          "class":"table table-striped",
          "id":"user-table",
          "elements":[
           {
              "typeofdiv":"thead",
              "class":"thead",
              "elements":[
                  {
                    "typeofdiv":"tr",
                    "elements":[
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Id"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Name"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Email"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Role"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":""
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":""
					 }
                    ]
                  } 
              ]
           },
           {
              "typeofdiv":"tbody",
              "class":"tbody  "
           }
          ]

        },
        {
          "typeofdiv":"ul",
          "id":"show-users",
          "elements":[

          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"show-roles-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Show Roles"
        },
         {
          "typeofdiv":"table",
          "class":"table table-striped",
          "id":"role-table",
          "elements":[
           {
              "typeofdiv":"thead",
              "class":"thead",
              "elements":[
                  {
                    "typeofdiv":"tr",
                    "elements":[
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Id"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Name"
                     }
                    ]
                  } 
              ]
           },
           {
              "typeofdiv":"tbody",
              "class":"tbody  "
           }
          ]
        },
        {
          "typeofdiv":"ul",
          "id":"show-roles",
          "elements":[

          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    }
  ]
}

#+END_SRC
** LDS Specifications
   This is a JSON file in which the necessary specifications are given to
generate HTML to do the CRUD operations on LDS database.
** Add Lab
#+NAME: add_lab_spec
#+BEGIN_SRC json :tangle ./app/static/js/add-lab-spec.json 
{
  "divisions_spec":[
    {
      "typeofdiv":"div",
      "id":"add-lab-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Add Lab"
        },
        {
          "typeofdiv":"ul",
          "id":"add-lab",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"id_label",
                  "innerText":"Id:"
                },
                {
                  "typeofdiv":"input",
                  "id":"id-box",
                  "type":"text"
                }
              ]
            },

            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"name_label",
                  "innerText":"Name:"
                },
                {
                  "typeofdiv":"input",
                  "id":"name-box",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"overview_label",
                  "innerText":"Overview:"
                },
                {
                  "typeofdiv":"input",
                   "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-discipline-id",
                  "innerText":"Discipline:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-institute-id",
                  "innerText":"Institute:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-developer-id",
                  "innerText":"Developer:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                }
              ]
            },

            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-hosting-info-id",
                  "innerText":"HostingInfo:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                }
              ]
            },

            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"integration_level_label",
                  "innerText":"IntegrationLevel:"
                },
                {
                  "typeofdiv":"input",
                   "type":"number",
                   "min":"0",
                   "max":"6"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-asset-id",
                  "innerText":"Asset:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                }
              ]
            },

            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"add-section-id",
                  "innerText":"Section:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                }
              ]
            },

            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "class":"btn btn-primary",
                  "type":"button",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
#+END_SRC
** Edit Lab
#+NAME: edit_lab_spec
#+BEGIN_SRC 
    {
      "typeofdiv":"div",
      "id":"update-lab-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Edit Lab"
        },
        {
          "typeofdiv":"ul",
          "id":"edit-lab",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"edit-lab-email",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"new-name-label",
                  "innerText":"New Name:"
                },
                {
                  "typeofdiv":"input",
                  "id":"edit-new-name",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"new-email-label",
                  "innerText":"New Email:"
                },
                {
                  "typeofdiv":"input",
                  "id":"edit-new-email",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"edit-user-role",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"done",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Done",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },

#+END_SRC
** Delete Lab
#+NAME: delete_lab_spec
#+BEGIN_SRC 
    {
      "typeofdiv":"div",
      "id":"remove-user-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Delete User"
        },
        {
          "typeofdiv":"ul",
          "id":"delete-user",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"delete-user-email",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"delete",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Delete",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },
    {
      "typeofdiv":"div",
      "id":"remove-role-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Delete Role"
        },
        {
          "typeofdiv":"ul",
          "id":"delete-role",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"select",
                  "id":"delete-user-role",
                  "innerText":"Role:"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"delete",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Delete Role",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },


#+END_SRC
** Show Labs
#+NAME: show_labs_spec
#+BEGIN_SRC 
    { 
      "typeofdiv":"div",
      "id":"show-users-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Show Users"
        },
        {
          "typeofdiv":"table",
          "class":"table table-striped",
          "id":"user-table",
          "elements":[
           {
              "typeofdiv":"thead",
              "class":"thead",
              "elements":[
                  {
                    "typeofdiv":"tr",
                    "elements":[
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Id"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Name"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Email"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Role"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":""
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":""
					 }
                    ]
                  } 
              ]
           },
           {
              "typeofdiv":"tbody",
              "class":"tbody  "
           }
          ]

        },
        {
          "typeofdiv":"ul",
          "id":"show-users",
          "elements":[

          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },

#+END_SRC
** Add Experiment
#+NAME: add_exp_spec
#+BEGIN_SRC  
   {
      "typeofdiv":"div",
      "id":"add-role-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Add Role"
        },
        {
          "typeofdiv":"ul",
          "id":"add-role",
          "elements":[
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"label",
                  "id":"role_label",
                  "innerText":"Role:"
                },
                {
                  "typeofdiv":"input",
                  "id":"add-role-box",
                  "type":"text"
                }
              ]
            },
            {
              "typeofdiv":"li",
              "elements":[
                {
                  "typeofdiv":"input",
                  "id":"add",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Add Role",
                  "onclick":""
                },
                {
                  "typeofdiv":"input",
                  "id":"cancel",
                  "type":"button",
                  "class":"btn btn-primary",
                  "value":"Cancel",
                  "onclick":""
                }
              ]
            }
          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    },

#+END_SRC
** Show Experiments
#+NAME: show_experiments_spec
#+BEGIN_SRC 
    {
      "typeofdiv":"div",
      "id":"show-roles-container",
      "class":"hidden",
      "elements":[
        {
          "typeofdiv":"p",
          "innerHTML":"Show Roles"
        },
         {
          "typeofdiv":"table",
          "class":"table table-striped",
          "id":"role-table",
          "elements":[
           {
              "typeofdiv":"thead",
              "class":"thead",
              "elements":[
                  {
                    "typeofdiv":"tr",
                    "elements":[
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Id"
                     },
                     {
                      "typeofdiv":"th",
                      "innerHTML":"Name"
                     }
                    ]
                  } 
              ]
           },
           {
              "typeofdiv":"tbody",
              "class":"tbody  "
           }
          ]
        },
        {
          "typeofdiv":"ul",
          "id":"show-roles",
          "elements":[

          ]
        },
        {
          "typeofdiv":"label",
          "id":"error-box",
          "value":"Error",
          "class":"error hidden"
        }
      ]
    }
  ]
}

#+END_SRC
