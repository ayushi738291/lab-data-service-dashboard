#+TITLE: Web Frontend for Lab Data Service Dashboard
#+AUTHOR: VLEAD
#+DATE: [2017-06-05 Mon]
#+SETUPFILE: ../../org-templates/level-2.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction 
  This document illustrates building of Web Frontend for LDS.
* JS
** Docoding a JSON
   These functions take a JSON object,decodes the JSON and generates the
specific HTML. Basic idea is to automate things. You just have to give JSON
specifications and all the HTML gets generated with least amount of efforts.


#+NAME: Decoding_json
#+BEGIN_SRC js :app/static/js/tangle main.js 
var createElements = function(element) {
  var new_ele = document.createElement(element['typeofdiv']);
  for (var i in element)
    if(i!="elements" && i!="typeofdiv")
    new_ele[i] = element[i];

  if(element['elements'])
  {
    element['elements'].forEach(function(ele) {
    var temp_element = createElements(ele);
      new_ele.append(temp_element)
    });
  }
  return new_ele;
};

var createDivisions = function() {
  return divisions_spec.map(createElements);
};
var attachDivsionsToBody = function(divisions) {
  divisions.forEach(function(division) {
    document.getElementsByTagName("body")[0].appendChild(division);
  });
};

#+END_SRC

* JSON
** JSON
   This is a JSON file in which we have given necessary specifications to
generate HTML to add a user to the database.
#+NAME: JSON_spec_file
#+BEGIN_SRC json :tangle app/static/js/main.json

var divisions_spec = [
  
  {
    "typeofdiv":"div",
    "id": "add-user-container",
    "class":"hidden",
    "elements": [
      {
	"typeofdiv": "p",
	"innerHTML":"Add User"
      },
      {
	"typeofdiv": "ul",
	"id":"add-user",
	"elements":[
	  {
	    "typeofdiv": "li",
	    "elements":[
	      {
		"typeofdiv": "label",
		"id": "name_label",
		"innerText": "Name:"
	      },

	      {
		"typeofdiv": "input",
		"id": "name-box",
		"type": "text"
	      }
	    ]
	  },

	  {
	    "typeofdiv": "li",
	    "elements":[
	      {
		"typeofdiv": "label",
		"id": "email_label",
		"innerText": "Email:"
	      },

	      {
		"typeofdiv": "input",
		"id": "email-box",
		"type": "text"
	      }
	    ]
	  },


	  {
	    "typeofdiv": "li",
	    "elements":[
	      {
		"typeofdiv": "label",
		"id": "role_label",
		"innerText": "Role:"
	      },

	      {
		"typeofdiv": "input",
		"id": "role-box",
		"type": "text"
	      }
	    ]
	  },
	  {
	    "typeofdiv": "li",
	    "elements":[
	      {
		"typeofdiv": "button",
		"id": "add",
		"value": "Add",
		"onclick":""
	      },

	      {
		"typeofdiv": "button",
		"id": "cancel",
		"value": "Cancel",
		"onclick":""
	      }
	    ]
	  }
	]
      },


      {
	"typeofdiv": "label",
	"id": "error-box",
	"value": "Error"
      }
    ]
  }
]

#+END_SRC
